#!/usr/bin/env python3

import os
import sys
import yaml

sys.path.append(os.path.dirname(os.path.dirname(os.path.realpath(__file__))))

from cloud.command import Command

def load_config():
    try:
        with open('cloud.yaml') as f:
            return yaml.safe_load(f)
    except:
        print("cannot open cloud.yaml")
        exit(1)

def command(cmd, rest):
    print(f"command {cmd}")
    config = load_config()
    for (name, guest) in config['guests'].items():
        print(name, guest)

if __name__ == "__main__":
    cmd = Command()
    if len(sys.argv) == 1:
        cmd.help()
    else:
        cmd.run(sys.argv[1], sys.argv[2:])
